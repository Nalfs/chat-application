<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://www.gstatic.com/firebasejs/4.10.1/firebase.js"></script>
    <script src="scripts/config.js"></script>
    <script>

        let user = auth.currentUser;
        console.log(user);



        auth.onAuthStateChanged(function(user){
            if (user) {
                console.log("authstatechanged TRUE");
                let nodeRef = database.ref("users/" + user.uid);
                nodeRef.update({isOnline: false});

                firebase.auth().signOut().then(function() {
                    console.log("signout successful")
                }).catch(function(error) {
                    console.log("signout failed")
                });
            }
            else {
                console.log("authstatechanged FALSE");
            }

        });





    </script>
</head>
<body>

</body>
</html>